<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenCT: driver.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">openct</a></div>
<h1>driver.h</h1><a href="driver_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00008 <span class="preprocessor">#ifndef OPENCT_DRIVER_H</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#define OPENCT_DRIVER_H</span>
00010 <span class="preprocessor"></span>
00011 <span class="preprocessor">#ifdef __cplusplus</span>
00012 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include &lt;openct/device.h&gt;</span>
00016 
<a name="l00020"></a><a class="code" href="structifd__driver__ops.html">00020</a> <span class="keyword">struct </span><a class="code" href="structifd__driver__ops.html">ifd_driver_ops</a> {
00021         <span class="keywordtype">int</span>             default_protocol;
00022 
00034         int             (*<a class="code" href="structifd__driver__ops.html#o1">open</a>)(ifd_reader_t *reader, <span class="keyword">const</span> <span class="keywordtype">char</span> *name);
00049         int             (*<a class="code" href="structifd__driver__ops.html#o2">close</a>)(ifd_reader_t * reader);
00076         int             (*<a class="code" href="structifd__driver__ops.html#o3">change_parity</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> parity);
00087         int             (*<a class="code" href="structifd__driver__ops.html#o4">change_speed</a>)(ifd_reader_t *reader, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> speed);
00102         int             (*<a class="code" href="structifd__driver__ops.html#o5">activate</a>)(ifd_reader_t *reader);
00113         int             (*<a class="code" href="structifd__driver__ops.html#o6">deactivate</a>)(ifd_reader_t *reader);
00138         int             (*<a class="code" href="structifd__driver__ops.html#o7">card_status</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot, <span class="keywordtype">int</span> *status);
00154         int             (*<a class="code" href="structifd__driver__ops.html#o8">card_reset</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot, <span class="keywordtype">void</span> *atr, size_t atr_len);
00169         int             (*<a class="code" href="structifd__driver__ops.html#o9">card_request</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot,
00170                                 time_t timeout, <span class="keyword">const</span> <span class="keywordtype">char</span> *message,
00171                                 <span class="keywordtype">void</span> *atr, size_t atr_len);
00185         int             (*<a class="code" href="structifd__driver__ops.html#o10">card_eject</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot,
00186                                 time_t timeout, <span class="keyword">const</span> <span class="keywordtype">char</span> *message);
00193         int             (*<a class="code" href="structifd__driver__ops.html#o11">output</a>)(ifd_reader_t *reader, <span class="keyword">const</span> <span class="keywordtype">char</span> *message);
00209         int             (*<a class="code" href="structifd__driver__ops.html#o12">perform_verify</a>)(ifd_reader_t *reader,
00210                                 <span class="keywordtype">int</span> slot, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout, <span class="keyword">const</span> <span class="keywordtype">char</span> *prompt,
00211                                 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, size_t data_len,
00212                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *resp, size_t resp_len);
00230         int             (*<a class="code" href="structifd__driver__ops.html#o13">send</a>)(ifd_reader_t *reader,
00231                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dad,
00232                                 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buffer,
00233                                 size_t len);
00247         int             (*<a class="code" href="structifd__driver__ops.html#o14">recv</a>)(ifd_reader_t *reader,
00248                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dad,
00249                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buffer,
00250                                 size_t len,
00251                                 <span class="keywordtype">long</span> timeout);
00274         int             (*<a class="code" href="structifd__driver__ops.html#o15">set_protocol</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot, <span class="keywordtype">int</span> protocol);
00290         int             (*<a class="code" href="structifd__driver__ops.html#o16">transparent</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot,
00291                                 <span class="keyword">const</span> <span class="keywordtype">void</span> *sbuf, size_t slen,
00292                                 <span class="keywordtype">void</span> *rbuf, size_t rlen);
00304         int             (*<a class="code" href="structifd__driver__ops.html#o17">sync_read</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot, <span class="keywordtype">int</span> proto,
00305                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> addr,
00306                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rbuf, size_t rlen);
00318         int             (*<a class="code" href="structifd__driver__ops.html#o18">sync_write</a>)(ifd_reader_t *reader, <span class="keywordtype">int</span> slot, <span class="keywordtype">int</span> proto,
00319                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> addr,
00320                                 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *sbuf, size_t slen);
00321 };
00322 
00323 <span class="keyword">extern</span> <span class="keywordtype">void</span>             ifd_driver_register(<span class="keyword">const</span> <span class="keywordtype">char</span> *,
00324                                 <span class="keyword">struct</span> <a class="code" href="structifd__driver__ops.html">ifd_driver_ops</a> *);
00325 <span class="keyword">extern</span> <span class="keyword">const</span> ifd_driver_t *ifd_driver_get(<span class="keyword">const</span> <span class="keywordtype">char</span> *);
00326 <span class="keyword">extern</span> <span class="keywordtype">int</span>              ifd_driver_add_id(<span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *);
00327 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *     ifd_driver_for_id(ifd_devid_t *);
00328 
00329 <span class="comment">/*</span>
00330 <span class="comment"> * Protocol handling for card terminal drivers</span>
00331 <span class="comment"> */</span>
00332 <span class="keyword">extern</span> ifd_protocol_t * ifd_protocol_select(ifd_reader_t *, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>);
00333 <span class="keyword">extern</span> <span class="keywordtype">int</span>              ifd_protocol_transceive(ifd_protocol_t *proto,
00334                                 <span class="keywordtype">int</span> dad,
00335                                 <span class="keyword">const</span> <span class="keywordtype">void</span> *, size_t,
00336                                 <span class="keywordtype">void</span> *, size_t);
00337 <span class="keyword">extern</span> <span class="keywordtype">int</span>              ifd_protocol_resynchronize(ifd_protocol_t *, <span class="keywordtype">int</span>);
00338 
00339 <span class="preprocessor">#ifdef __cplusplus</span>
00340 <span class="preprocessor"></span>}
00341 <span class="preprocessor">#endif</span>
00342 <span class="preprocessor"></span>
00343 <span class="preprocessor">#endif </span><span class="comment">/* OPENCT_DRIVER_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Aug 28 23:01:41 2005 for OpenCT by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
